<!DOCTYPE html>
<html>
<head>
  <title>Game Center</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-family: 'Arial Black', Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
      padding: 20px;
    }
    
    h1 {
      font-size: 48px;
      margin: 20px;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    }
    
    /* Menu Screen */
    .menu {
      display: flex;
      flex-direction: column;
      gap: 20px;
      align-items: center;
    }
    
    .game-option {
      width: 300px;
      padding: 30px;
      background: white;
      color: #667eea;
      border: none;
      border-radius: 20px;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    
    .game-option:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }
    
    /* Mode Selection */
    .mode-selection {
      display: flex;
      gap: 20px;
      margin: 20px;
    }
    
    .mode-btn {
      padding: 20px 40px;
      background: rgba(255,255,255,0.3);
      color: white;
      border: 2px solid white;
      border-radius: 15px;
      font-size: 20px;
      cursor: pointer;
      font-weight: bold;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
    }
    
    .mode-btn:hover {
      background: rgba(255,255,255,0.5);
      transform: scale(1.05);
    }
    
    /* Grid Size Input */
    .grid-input-container {
      display: flex;
      gap: 10px;
      align-items: center;
      margin: 20px;
      font-size: 20px;
    }
    
    .grid-input {
      width: 80px;
      padding: 10px;
      font-size: 20px;
      border: 2px solid white;
      border-radius: 10px;
      background: rgba(255,255,255,0.3);
      color: white;
      text-align: center;
      font-weight: bold;
    }
    
    .grid-input::placeholder {
      color: rgba(255,255,255,0.6);
    }
    
    /* Rock Paper Scissors Styles */
    .score-board {
      display: flex;
      gap: 40px;
      margin: 20px;
      font-size: 24px;
    }
    
    .score {
      background: rgba(255,255,255,0.2);
      padding: 15px 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }
    
    .choices {
      display: flex;
      gap: 20px;
      margin: 30px;
    }
    
    .choice {
      width: 120px;
      height: 120px;
      background: white;
      border: none;
      border-radius: 20px;
      font-size: 60px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    
    .choice:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }
    
    .choice:active {
      transform: scale(0.95);
    }
    
    .result {
      font-size: 36px;
      margin: 20px;
      min-height: 50px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .battle {
      display: flex;
      gap: 50px;
      margin: 20px;
      font-size: 80px;
      align-items: center;
    }
    
    .player-choice, .computer-choice {
      background: rgba(255,255,255,0.2);
      padding: 20px;
      border-radius: 20px;
      min-width: 100px;
      text-align: center;
      backdrop-filter: blur(10px);
    }
    
    /* Tic Tac Toe Styles */
    .game-board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      gap: 10px;
      margin: 20px;
    }
    
    .cell {
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,0.3);
      border: 2px solid rgba(255,255,255,0.5);
      font-size: 48px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(10px);
      border-radius: 10px;
      transition: all 0.3s;
    }
    
    .cell:hover {
      background: rgba(255,255,255,0.5);
      transform: scale(1.05);
    }
    
    /* Dots and Boxes Styles */
    .dots-container {
      display: inline-block;
      padding: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }
    
    .dot {
      width: 8px;
      height: 8px;
      background: white;
      border-radius: 50%;
      position: absolute;
      transform: translate(-50%, -50%);
    }
    
    .line {
      position: absolute;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .line.horizontal {
      height: 4px;
      width: 40px;
    }
    
    .line.vertical {
      width: 4px;
      height: 40px;
    }
    
    .line:hover {
      background: #4ade80;
      transform: scale(1.1);
    }
    
    .line.claimed {
      cursor: default;
    }
    
    .line.claimed.player1 {
      background: #60a5fa;
    }
    
    .line.claimed.player2 {
      background: #f87171;
    }
    
    .box {
      position: absolute;
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 5px;
    }
    
    .box.player1 {
      background: rgba(96, 165, 250, 0.5);
      color: #60a5fa;
    }
    
    .box.player2 {
      background: rgba(248, 113, 113, 0.5);
      color: #f87171;
    }
    
    button {
      padding: 15px 40px;
      background: rgba(255,255,255,0.3);
      color: white;
      border: 2px solid white;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      margin: 5px;
      font-weight: bold;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
    }
    
    button:hover {
      background: rgba(255,255,255,0.5);
      transform: scale(1.05);
    }
    
    textarea {
      margin-top: 20px;
      width: 300px;
      height: 60px;
      border-radius: 10px;
      padding: 10px;
      border: 2px solid white;
      background: rgba(255,255,255,0.3);
      color: white;
      font-size: 14px;
    }
    
    textarea::placeholder {
      color: rgba(255,255,255,0.7);
    }
    
    input {
      padding: 10px;
      border-radius: 10px;
      border: 2px solid white;
      background: rgba(255,255,255,0.3);
      color: white;
      font-size: 16px;
    }
    
    input::placeholder {
      color: rgba(255,255,255,0.7);
    }
    
    .hidden {
      display: none;
    }
    
    .win { color: #4ade80; }
    .lose { color: #f87171; }
    .tie { color: #fbbf24; }
  </style>
</head>
<body>
  <!-- Menu Screen -->
  <div id="menuScreen">
    <h1>üéÆ Game Center üéÆ</h1>
    <div class="menu">
      <button class="game-option" onclick="selectRPSMode()">
        ü™®üìÑ‚úÇÔ∏è<br>Rock Paper Scissors
      </button>
      <button class="game-option" onclick="startGame('ttt')">
        ‚≠ï‚ùå<br>Tic Tac Toe
      </button>
      <button class="game-option" onclick="showDotsSetup()">
        ‚ö´üü¶<br>Dots and Boxes
      </button>
    </div>
  </div>

  <!-- RPS Mode Selection -->
  <div id="rpsModeScreen" class="hidden">
    <h1>ü™®üìÑ‚úÇÔ∏è Rock Paper Scissors</h1>
    <p style="font-size: 20px;">Choose Game Mode:</p>
    <div class="mode-selection">
      <button class="mode-btn" onclick="startRPS('computer')">
        ü§ñ vs Computer
      </button>
      <button class="mode-btn" onclick="startRPS('friend')">
        üë• vs Friend
      </button>
    </div>
    <button onclick="backToMenu()">Back to Menu</button>
  </div>

  <!-- Dots and Boxes Setup -->
  <div id="dotsSetupScreen" class="hidden">
    <h1>‚ö´üü¶ Dots and Boxes</h1>
    <p style="font-size: 20px;">Choose Grid Size:</p>
    
    <div class="grid-input-container">
      <input type="number" id="gridWidth" class="grid-input" placeholder="Width" value="5" min="2" max="10">
      <span>√ó</span>
      <input type="number" id="gridHeight" class="grid-input" placeholder="Height" value="5" min="2" max="10">
      <span>dots</span>
    </div>
    
    <button class="mode-btn" onclick="startDotsGame()">Start Game</button>
    <button onclick="backToMenu()">Back to Menu</button>
  </div>

  <!-- Rock Paper Scissors vs Computer -->
  <div id="rpsComputerGame" class="hidden">
    <h1>üéÆ Rock Paper Scissors üéÆ</h1>
    <p style="font-size: 20px;">vs Computer</p>
    
    <div class="score-board">
      <div class="score">You: <span id="playerScore">0</span></div>
      <div class="score">Computer: <span id="computerScore">0</span></div>
    </div>
    
    <div class="battle">
      <div class="player-choice" id="playerChoice">?</div>
      <div>VS</div>
      <div class="computer-choice" id="computerChoice">?</div>
    </div>
    
    <div class="result" id="rpsResult">Choose your weapon!</div>
    
    <div class="choices">
      <button class="choice" onclick="playRPSComputer('ü™®')">ü™®</button>
      <button class="choice" onclick="playRPSComputer('üìÑ')">üìÑ</button>
      <button class="choice" onclick="playRPSComputer('‚úÇÔ∏è')">‚úÇÔ∏è</button>
    </div>
    
    <button onclick="resetRPSComputer()">Reset Score</button>
    <button onclick="backToRPSMode()">Back</button>
  </div>

  <!-- Rock Paper Scissors vs Friend -->
  <div id="rpsFriendGame" class="hidden">
    <h1>üéÆ Rock Paper Scissors üéÆ</h1>
    <p style="font-size: 20px;">vs Friend (Turn: <span id="currentTurn">Player 1</span>)</p>
    
    <div class="score-board">
      <div class="score">Player 1: <span id="player1Score">0</span></div>
      <div class="score">Player 2: <span id="player2Score">0</span></div>
    </div>
    
    <div class="battle">
      <div class="player-choice" id="player1Choice">?</div>
      <div>VS</div>
      <div class="computer-choice" id="player2Choice">?</div>
    </div>
    
    <div class="result" id="rpsFriendResult">Player 1, choose your weapon!</div>
    
    <div class="choices">
      <button class="choice" onclick="playRPSFriend('ü™®')">ü™®</button>
      <button class="choice" onclick="playRPSFriend('üìÑ')">üìÑ</button>
      <button class="choice" onclick="playRPSFriend('‚úÇÔ∏è')">‚úÇÔ∏è</button>
    </div>
    
    <div>
      <button onclick="copyRPSState()">Copy Game State</button>
      <button onclick="loadRPSState()">Load Game State</button>
      <button onclick="resetRPSFriend()">Reset Score</button>
      <button onclick="backToRPSMode()">Back</button>
    </div>
    
    <textarea id="rpsStateInput" placeholder="Paste game state here"></textarea>
  </div>

  <!-- Tic Tac Toe Game -->
  <div id="tttGame" class="hidden">
    <h1>‚≠ï Tic-Tac-Toe ‚ùå</h1>
    <p>Current Player: <span id="currentPlayer">X</span></p>
    
    <div class="game-board" id="board"></div>
    
    <div>
      <button onclick="copyGameState()">Copy Game State</button>
      <button onclick="loadGameState()">Load Game State</button>
      <button onclick="resetTTT()">Reset</button>
      <button onclick="backToMenu()">Back to Menu</button>
    </div>
    
    <textarea id="gameStateInput" placeholder="Paste game state here"></textarea>
  </div>

  <!-- Dots and Boxes Game -->
  <div id="dotsGame" class="hidden">
    <h1>‚ö´ Dots and Boxes üü¶</h1>
    <p>Current Player: <span id="dotsCurrentPlayer" style="color: #60a5fa;">Player 1</span></p>
    
    <div class="score-board">
      <div class="score" style="color: #60a5fa;">Player 1: <span id="dotsPlayer1Score">0</span></div>
      <div class="score" style="color: #f87171;">Player 2: <span id="dotsPlayer2Score">0</span></div>
    </div>
    
    <div class="dots-container" id="dotsContainer"></div>
    
    <div>
      <button onclick="copyDotsState()">Copy Game State</button>
      <button onclick="loadDotsState()">Load Game State</button>
      <button onclick="resetDots()">New Game</button>
      <button onclick="backToMenu()">Back to Menu</button>
    </div>
    
    <textarea id="dotsStateInput" placeholder="Paste game state here"></textarea>
  </div>

  <script>
    // Menu functions
    function selectRPSMode() {
      document.getElementById('menuScreen').classList.add('hidden');
      document.getElementById('rpsModeScreen').classList.remove('hidden');
    }
    
    function showDotsSetup() {
      document.getElementById('menuScreen').classList.add('hidden');
      document.getElementById('dotsSetupScreen').classList.remove('hidden');
    }
    
    function startGame(game) {
      document.getElementById('menuScreen').classList.add('hidden');
      if (game === 'ttt') {
        document.getElementById('tttGame').classList.remove('hidden');
        createBoard();
      }
    }
    
    function startRPS(mode) {
      document.getElementById('rpsModeScreen').classList.add('hidden');
      if (mode === 'computer') {
        document.getElementById('rpsComputerGame').classList.remove('hidden');
      } else {
        document.getElementById('rpsFriendGame').classList.remove('hidden');
      }
    }
    
    function startDotsGame() {
      const width = parseInt(document.getElementById('gridWidth').value) || 5;
      const height = parseInt(document.getElementById('gridHeight').value) || 5;
      
      if (width < 2 || width > 10 || height < 2 || height > 10) {
        alert('Grid size must be between 2 and 10!');
        return;
      }
      
      dotsGridWidth = width;
      dotsGridHeight = height;
      
      document.getElementById('dotsSetupScreen').classList.add('hidden');
      document.getElementById('dotsGame').classList.remove('hidden');
      initDotsGame();
    }
    
    function backToMenu() {
      document.getElementById('menuScreen').classList.remove('hidden');
      document.getElementById('rpsModeScreen').classList.add('hidden');
      document.getElementById('dotsSetupScreen').classList.add('hidden');
      document.getElementById('rpsComputerGame').classList.add('hidden');
      document.getElementById('rpsFriendGame').classList.add('hidden');
      document.getElementById('tttGame').classList.add('hidden');
      document.getElementById('dotsGame').classList.add('hidden');
    }
    
    function backToRPSMode() {
      document.getElementById('rpsModeScreen').classList.remove('hidden');
      document.getElementById('rpsComputerGame').classList.add('hidden');
      document.getElementById('rpsFriendGame').classList.add('hidden');
    }

    // ==================== RPS vs COMPUTER ====================
    let playerScore = 0;
    let computerScore = 0;
    const choices = ['ü™®', 'üìÑ', '‚úÇÔ∏è'];
    
    function playRPSComputer(playerChoice) {
      const computerChoice = choices[Math.floor(Math.random() * 3)];
      
      document.getElementById('playerChoice').textContent = playerChoice;
      document.getElementById('computerChoice').textContent = computerChoice;
      
      const result = getRPSResult(playerChoice, computerChoice);
      const resultEl = document.getElementById('rpsResult');
      
      if (result === 'win') {
        playerScore++;
        resultEl.textContent = 'üéâ You Win! üéâ';
        resultEl.className = 'result win';
      } else if (result === 'lose') {
        computerScore++;
        resultEl.textContent = 'üò¢ You Lose! üò¢';
        resultEl.className = 'result lose';
      } else {
        resultEl.textContent = 'ü§ù It\'s a Tie! ü§ù';
        resultEl.className = 'result tie';
      }
      
      document.getElementById('playerScore').textContent = playerScore;
      document.getElementById('computerScore').textContent = computerScore;
    }
    
    function getRPSResult(player, computer) {
      if (player === computer) return 'tie';
      
      if (
        (player === 'ü™®' && computer === '‚úÇÔ∏è') ||
        (player === 'üìÑ' && computer === 'ü™®') ||
        (player === '‚úÇÔ∏è' && computer === 'üìÑ')
      ) {
        return 'win';
      }
      
      return 'lose';
    }
    
    function resetRPSComputer() {
      playerScore = 0;
      computerScore = 0;
      document.getElementById('playerScore').textContent = 0;
      document.getElementById('computerScore').textContent = 0;
      document.getElementById('playerChoice').textContent = '?';
      document.getElementById('computerChoice').textContent = '?';
      document.getElementById('rpsResult').textContent = 'Choose your weapon!';
      document.getElementById('rpsResult').className = 'result';
    }

    // ==================== RPS vs FRIEND ====================
    let player1Score = 0;
    let player2Score = 0;
    let currentRPSTurn = 1;
    let player1Move = null;
    let player2Move = null;
    
    function playRPSFriend(choice) {
      if (currentRPSTurn === 1) {
        player1Move = choice;
        document.getElementById('player1Choice').textContent = '‚úÖ';
        document.getElementById('currentTurn').textContent = 'Player 2';
        document.getElementById('rpsFriendResult').textContent = 'Player 2, choose your weapon!';
        currentRPSTurn = 2;
      } else {
        player2Move = choice;
        document.getElementById('player2Choice').textContent = '‚úÖ';
        
        setTimeout(() => {
          document.getElementById('player1Choice').textContent = player1Move;
          document.getElementById('player2Choice').textContent = player2Move;
          
          const result = getRPSResult(player1Move, player2Move);
          const resultEl = document.getElementById('rpsFriendResult');
          
          if (result === 'win') {
            player1Score++;
            resultEl.textContent = 'üéâ Player 1 Wins! üéâ';
            resultEl.className = 'result win';
          } else if (result === 'lose') {
            player2Score++;
            resultEl.textContent = 'üéâ Player 2 Wins! üéâ';
            resultEl.className = 'result win';
          } else {
            resultEl.textContent = 'ü§ù It\'s a Tie! ü§ù';
            resultEl.className = 'result tie';
          }
          
          document.getElementById('player1Score').textContent = player1Score;
          document.getElementById('player2Score').textContent = player2Score;
          
          setTimeout(() => {
            document.getElementById('player1Choice').textContent = '?';
            document.getElementById('player2Choice').textContent = '?';
            document.getElementById('currentTurn').textContent = 'Player 1';
            document.getElementById('rpsFriendResult').textContent = 'Player 1, choose your weapon!';
            currentRPSTurn = 1;
            player1Move = null;
            player2Move = null;
          }, 3000);
        }, 500);
      }
    }
    
    function copyRPSState() {
      const state = JSON.stringify({ 
        player1Score, 
        player2Score, 
        currentRPSTurn, 
        player1Move, 
        player2Move 
      });
      navigator.clipboard.writeText(state);
      alert('Game state copied! Send it to your friend.');
    }
    
    function loadRPSState() {
      const input = document.getElementById('rpsStateInput').value;
      try {
        const state = JSON.parse(input);
        player1Score = state.player1Score;
        player2Score = state.player2Score;
        currentRPSTurn = state.currentRPSTurn;
        player1Move = state.player1Move;
        player2Move = state.player2Move;
        
        document.getElementById('player1Score').textContent = player1Score;
        document.getElementById('player2Score').textContent = player2Score;
        document.getElementById('currentTurn').textContent = `Player ${currentRPSTurn}`;
        
        if (player1Move) {
          document.getElementById('player1Choice').textContent = '‚úÖ';
        } else {
          document.getElementById('player1Choice').textContent = '?';
        }
        
        if (player2Move) {
          document.getElementById('player2Choice').textContent = '‚úÖ';
        } else {
          document.getElementById('player2Choice').textContent = '?';
        }
        
        alert('Game state loaded!');
      } catch (e) {
        alert('Invalid game state!');
      }
    }
    
    function resetRPSFriend() {
      player1Score = 0;
      player2Score = 0;
      currentRPSTurn = 1;
      player1Move = null;
      player2Move = null;
      document.getElementById('player1Score').textContent = 0;
      document.getElementById('player2Score').textContent = 0;
      document.getElementById('player1Choice').textContent = '?';
      document.getElementById('player2Choice').textContent = '?';
      document.getElementById('currentTurn').textContent = 'Player 1';
      document.getElementById('rpsFriendResult').textContent = 'Player 1, choose your weapon!';
      document.getElementById('rpsFriendResult').className = 'result';
    }

    // ==================== TIC TAC TOE ====================
    let board = ['', '', '', '', '', '', '', '', ''];
    let currentPlayer = 'X';
    
    function createBoard() {
      const boardEl = document.getElementById('board');
      boardEl.innerHTML = '';
      
      board.forEach((cell, index) => {
        const cellEl = document.createElement('div');
        cellEl.className = 'cell';
        cellEl.textContent = cell;
        cellEl.onclick = () => makeMove(index);
        boardEl.appendChild(cellEl);
      });
    }
    
    function makeMove(index) {
      if (board[index] === '' && !checkWinner()) {
        board[index] = currentPlayer;
        currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
        document.getElementById('currentPlayer').textContent = currentPlayer;
        createBoard();
        
        const winner = checkWinner();
        if (winner) {
          alert(`${winner} wins!`);
        }
      }
    }
    
    function checkWinner() {
      const wins = [
        [0,1,2], [3,4,5], [6,7,8],
        [0,3,6], [1,4,7], [2,5,8],
        [0,4,8], [2,4,6]
      ];
      
      for (let combo of wins) {
        const [a,b,c] = combo;
        if (board[a] && board[a] === board[b] && board[a] === board[c]) {
          return board[a];
        }
      }
      return null;
    }
    
    function copyGameState() {
      const state = JSON.stringify({ board, currentPlayer });
      navigator.clipboard.writeText(state);
      alert('Game state copied! Send it to your friend.');
    }
    
    function loadGameState() {
      const input = document.getElementById('gameStateInput').value;
      try {
        const state = JSON.parse(input);
        board = state.board;
        currentPlayer = state.currentPlayer;
        document.getElementById('currentPlayer').textContent = currentPlayer;
        createBoard();
        alert('Game state loaded!');
      } catch (e) {
        alert('Invalid game state!');
      }
    }
    
    function resetTTT() {
      board = ['', '', '', '', '', '', '', '', ''];
      currentPlayer = 'X';
      document.getElementById('currentPlayer').textContent = currentPlayer;
      createBoard();
    }

    // ==================== DOTS AND BOXES ====================
    let dotsGridWidth = 5;
    let dotsGridHeight = 5;
    let dotsCurrentPlayer = 1;
    let dotsPlayer1ScoreVal = 0;
    let dotsPlayer2ScoreVal = 0;
    let horizontalLines = [];
    let verticalLines = [];
    let boxes = [];
    
    function initDotsGame() {
      dotsCurrentPlayer = 1;
      dotsPlayer1ScoreVal = 0;
      dotsPlayer2ScoreVal = 0;
      
      // Initialize line states
      horizontalLines = [];
      verticalLines = [];
      boxes = [];
      
      for (let y = 0; y < dotsGridHeight; y++) {
        horizontalLines[y] = [];
        for (let x = 0; x < dotsGridWidth - 1; x++) {
          horizontalLines[y][x] = 0; // 0 = unclaimed, 1 = player1, 2 = player2
        }
      }
      
      for (let y = 0; y < dotsGridHeight - 1; y++) {
        verticalLines[y] = [];
        for (let x = 0; x < dotsGridWidth; x++) {
          verticalLines[y][x] = 0;
        }
      }
      
      for (let y = 0; y < dotsGridHeight - 1; y++) {
        boxes[y] = [];
        for (let x = 0; x < dotsGridWidth - 1; x++) {
          boxes[y][x] = 0; // 0 = unclaimed, 1 = player1, 2 = player2
        }
      }
      
      renderDotsGame();
      updateDotsUI();
    }
    
    function renderDotsGame() {
      const container = document.getElementById('dotsContainer');
      container.innerHTML = '';
      container.style.position = 'relative';
      
      const spacing = 50;
      const width = (dotsGridWidth - 1) * spacing + 20;
      const height = (dotsGridHeight - 1) * spacing + 20;
      
      container.style.width = width + 'px';
      container.style.height = height + 'px';
      
      // Draw dots
      for (let y = 0; y < dotsGridHeight; y++) {
        for (let x = 0; x < dotsGridWidth; x++) {
          const dot = document.createElement('div');
          dot.className = 'dot';
          dot.style.left = (x * spacing + 10) + 'px';
          dot.style.top = (y * spacing + 10) + 'px';
          container.appendChild(dot);
        }
      }
      
      // Draw horizontal lines
      for (let y = 0; y < dotsGridHeight; y++) {
        for (let x = 0; x < dotsGridWidth - 1; x++) {
          const line = document.createElement('div');
          line.className = 'line horizontal';
          line.style.left = (x * spacing + 10) + 'px';
          line.style.top = (y * spacing + 8) + 'px';
          
          if (horizontalLines[y][x] > 0) {
            line.classList.add('claimed');
            line.classList.add(horizontalLines[y][x] === 1 ? 'player1' : 'player2');
          } else {
            line.onclick = () => claimLine('h', x, y);
          }
          
          container.appendChild(line);
        }
      }
      
      // Draw vertical lines
      for (let y = 0; y < dotsGridHeight - 1; y++) {
        for (let x = 0; x < dotsGridWidth; x++) {
          const line = document.createElement('div');
          line.className = 'line vertical';
          line.style.left = (x * spacing + 8) + 'px';
          line.style.top = (y * spacing + 10) + 'px';
          
          if (verticalLines[y][x] > 0) {
            line.classList.add('claimed');
            line.classList.add(verticalLines[y][x] === 1 ? 'player1' : 'player2');
          } else {
            line.onclick = () => claimLine('v', x, y);
          }
          
          container.appendChild(line);
        }
      }
      
      // Draw boxes
      for (let y = 0; y < dotsGridHeight - 1; y++) {
        for (let x = 0; x < dotsGridWidth - 1; x++) {
          if (boxes[y][x] > 0) {
            const box = document.createElement('div');
            box.className = 'box';
            box.classList.add(boxes[y][x] === 1 ? 'player1' : 'player2');
            box.style.left = (x * spacing + 10) + 'px';
            box.style.top = (y * spacing + 10) + 'px';
            box.textContent = boxes[y][x] === 1 ? '1' : '2';
            container.appendChild(box);
          }
        }
      }
    }
    
    function claimLine(type, x, y) {
      let completedBox = false;
      
      if (type === 'h') {
        horizontalLines[y][x] = dotsCurrentPlayer;
        
        // Check if this completes any boxes
        if (y > 0 && checkBox(x, y - 1)) {
          boxes[y - 1][x] = dotsCurrentPlayer;
          completedBox = true;
        }
        if (y < dotsGridHeight - 1 && checkBox(x, y)) {
          boxes[y][x] = dotsCurrentPlayer;
          completedBox = true;
        }
      } else {
        verticalLines[y][x] = dotsCurrentPlayer;
        
        // Check if this completes any boxes
        if (x > 0 && checkBox(x - 1, y)) {
          boxes[y][x - 1] = dotsCurrentPlayer;
          completedBox = true;
        }
        if (x < dotsGridWidth - 1 && checkBox(x, y)) {
          boxes[y][x] = dotsCurrentPlayer;
          completedBox = true;
        }
      }
      
      renderDotsGame();
      
      if (completedBox) {
        // Player gets another turn
        if (dotsCurrentPlayer === 1) {
          dotsPlayer1ScoreVal++;
        } else {
          dotsPlayer2ScoreVal++;
        }
        updateDotsUI();
        
        // Check if game is over
        if (checkDotsGameOver()) {
          setTimeout(() => {
            if (dotsPlayer1ScoreVal > dotsPlayer2ScoreVal) {
              alert('üéâ Player 1 Wins! üéâ');
            } else if (dotsPlayer2ScoreVal > dotsPlayer1ScoreVal) {
              alert('üéâ Player 2 Wins! üéâ');
            } else {
              alert('ü§ù It\'s a Tie! ü§ù');
            }
          }, 100);
        }
      } else {
        // Switch player
        dotsCurrentPlayer = dotsCurrentPlayer === 1 ? 2 : 1;
        updateDotsUI();
      }
    }
    
    function checkBox(x, y) {
      return horizontalLines[y][x] > 0 && 
             horizontalLines[y + 1][x] > 0 && 
             verticalLines[y][x] > 0 && 
             verticalLines[y][x + 1] > 0;
    }
    
    function checkDotsGameOver() {
      const totalBoxes = (dotsGridWidth - 1) * (dotsGridHeight - 1);
      return (dotsPlayer1ScoreVal + dotsPlayer2ScoreVal) === totalBoxes;
    }
    
    function updateDotsUI() {
      const playerEl = document.getElementById('dotsCurrentPlayer');
      playerEl.textContent = `Player ${dotsCurrentPlayer}`;
      playerEl.style.color = dotsCurrentPlayer === 1 ? '#60a5fa' : '#f87171';
      
      document.getElementById('dotsPlayer1Score').textContent = dotsPlayer1ScoreVal;
      document.getElementById('dotsPlayer2Score').textContent = dotsPlayer2ScoreVal;
    }
    
    function copyDotsState() {
      const state = JSON.stringify({
        width: dotsGridWidth,
        height: dotsGridHeight,
        currentPlayer: dotsCurrentPlayer,
        player1Score: dotsPlayer1ScoreVal,
        player2Score: dotsPlayer2ScoreVal,
        horizontal: horizontalLines,
        vertical: verticalLines,
        boxes: boxes
      });
      navigator.clipboard.writeText(state);
      alert('Game state copied! Send it to your friend.');
    }
    
    function loadDotsState() {
      const input = document.getElementById('dotsStateInput').value;
      try {
        const state = JSON.parse(input);
        dotsGridWidth = state.width;
        dotsGridHeight = state.height;
        dotsCurrentPlayer = state.currentPlayer;
        dotsPlayer1ScoreVal = state.player1Score;
        dotsPlayer2ScoreVal = state.player2Score;
        horizontalLines = state.horizontal;
        verticalLines = state.vertical;
        boxes = state.boxes;
        
        renderDotsGame();
        updateDotsUI();
        alert('Game state loaded!');
      } catch (e) {
        alert('Invalid game state!');
      }
    }
    
    function resetDots() {
      initDotsGame();
    }
  </script>
</body>
</html>